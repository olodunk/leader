<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>干部测评打分系统</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/tabler.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tabler-icons.min.css') }}">

    <style>
        :root {
            --tblr-font-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            font-feature-settings: "cv03", "cv04", "cv11";
            background-color: #f4f6fa;
        }

        /* 侧边栏激活样式 */
        .navbar-vertical .nav-item.active .nav-link {
            background-color: rgba(32, 107, 196, 0.06);
            color: #206bc4;
            font-weight: 600;
        }
    </style>

    {% block head_extra %}{% endblock %}
</head>

<body class="layout-fluid">
    <div class="page">

        <aside class="navbar navbar-vertical navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#sidebar-menu"><span class="navbar-toggler-icon"></span></button>

                <h1 class="navbar-brand navbar-brand-autodark mb-0">
                    <a href="{{ url_for('assessment_overview') }}"
                        class="text-decoration-none d-flex align-items-center justify-content-start gap-2 w-100 ps-3">
                        <i class="ti ti-checklist fs-2 text-primary"></i><span class="text-dark">测评系统</span>
                    </a>
                </h1>

                <div class="collapse navbar-collapse" id="sidebar-menu">
                    <ul class="navbar-nav pt-lg-3">

                        <li class="nav-item {% if request.endpoint == 'assessment_home' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_home') }}"><span
                                    class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-file-info"></i></span><span class="nav-link-title">操作说明</span></a>
                        </li>

                        <li class="nav-item">
                            <div class="nav-link disabled text-muted text-uppercase fw-bold mt-2 mb-1">
                                打分项目
                            </div>
                        </li>

                        {# 权限控制：院领导类型账号不显示此菜单 #}
                        {% if session.get('assessor_dept_type') != '院领导' %}
                        <li class="nav-item {% if request.endpoint == 'assessment_team' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_team') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-users"></i></span>
                                <span class="nav-link-title">领导班子综合考核评价</span>
                            </a>
                        </li>
                        <li class="nav-item {% if request.endpoint == 'assessment_personnel' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_personnel') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-user-star"></i></span>
                                <span class="nav-link-title">领导人员综合考核评价</span>
                            </a>
                        </li>
                        {% endif %}

                        {# Project 3: Democratic Evaluation (Dropdown) #}
                        {% if democratic_nav_items %}
                        <li
                            class="nav-item dropdown {% if request.endpoint == 'assessment_democratic' %}active{% endif %}">
                            <a class="nav-link dropdown-toggle" href="#navbar-extra" data-bs-toggle="dropdown"
                                data-bs-auto-close="false" role="button" aria-expanded="true">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-users-group"></i></span>
                                <span class="nav-link-title">中层干部民主测评</span>
                            </a>
                            <div class="dropdown-menu show">
                                <div class="dropdown-menu-columns">
                                    <div class="dropdown-menu-column">
                                        {% for item in democratic_nav_items %}
                                        <a class="dropdown-item {% if current_group_key == item.key %}active{% endif %}"
                                            href="{{ url_for('assessment_democratic', group_key=item.key) }}"
                                            style="font-size: small;">
                                            {{ item.title }}
                                        </a>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </li>
                        {% endif %}

                        {# Project 4: Recommend Principal (Independent) #}
                        {% if recommend_principal_enabled %}
                        <li
                            class="nav-item {% if request.endpoint == 'assessment_recommend_principal' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_recommend_principal') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-thumb-up"></i></span>
                                <span class="nav-link-title">优秀干部民主推荐-正职</span>
                            </a>
                        </li>
                        {% endif %}

                        {# Project 5: Recommend Deputy (Independent) #}
                        {% if recommend_deputy_enabled %}
                        <li
                            class="nav-item {% if request.endpoint == 'assessment_recommend_deputy' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_recommend_deputy') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-thumb-up"></i></span>
                                <span class="nav-link-title">优秀干部民主推荐-副职</span>
                            </a>
                        </li>
                        {% endif %}

                        {# Project 6: Selection & Appointment (Independent) #}
                        {% if selection_appointment_enabled %}
                        <li
                            class="nav-item {% if request.endpoint == 'assessment_selection_appointment' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_selection_appointment') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-file-text"></i></span>
                                <span class="nav-link-title">干部选拔任用工作民主评议表</span>
                            </a>
                        </li>
                        {% endif %}

                        {# Project 7: New Promotion Evaluation #}
                        {% if new_promotion_enabled %}
                        <li class="nav-item {% if request.endpoint == 'assessment_new_promotion' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_new_promotion') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-user-check"></i></span>
                                <span class="nav-link-title">新提拔任用干部民主评议表</span>
                            </a>
                        </li>
                        {% endif %}

                        <li class="nav-item {% if request.endpoint == 'assessment_overview' %}active{% endif %}">
                            <a class="nav-link" href="{{ url_for('assessment_overview') }}"><span
                                    class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-circle-check"></i></span><span
                                    class="nav-link-title">操作结束</span></a>
                        </li>

                        {# 后续项目可继续添加 #}

                        <li class="nav-item mt-auto">
                            <div class="nav-link d-flex flex-column align-items-start py-3">
                                <div class="text-muted small">当前账号</div>
                                <div class="fw-bold text-dark">{{ session.get('assessor_username', 'Unknown') }}</div>
                                <div class="text-muted small mt-1">{{ session.get('assessor_dept_name', '') }}</div>
                            </div>
                            <a class="nav-link text-danger border-top pt-3"
                                href="{{ url_for('logout', type='assessment') }}">
                                <span class="nav-link-icon d-md-none d-lg-inline-block"><i
                                        class="ti ti-logout"></i></span>
                                <span class="nav-link-title">安全退出</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </aside>

        <div class="page-wrapper">
            <div class="page-body">
                {% block content %}{% endblock %}
            </div>
            <div class="text-center text-muted py-3" style="font-size: 0.8rem;">
                Powered by 数智技术中心
            </div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='js/tabler.min.js') }}"></script>
    {% block script_extra %}{% endblock %}
</body>

</html>